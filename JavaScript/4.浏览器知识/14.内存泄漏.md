# 内存泄漏

1. 定义
    - 应该被回收的空间无法被回收，导致内存不断被占用，可用内存越来越少

2. 为什么会影响性能？
    - 内存总是不够，导致垃圾回收频繁触发，产生全停顿
    - 内存中存在大量对象，导致垃圾回收算法执行变慢

3. 原因
    - 一句话：被根节点误持有
    - 分情况
        - 把临时变量不断挂载到window对象和DOM对象上面
        - 意外的全局变量（比如`let a = b = 1`中的b）
        - 大量事件监听，没有及时卸载
        - 被遗忘的定时器，没有及时清除
        - 闭包使用不当

4. 检查办法
    - 【粗略】利用浏览器F12的 Performance面板
        - 在 Memory视图 中可以看到 Js堆、Document、DOM、事件监听等内存的变化趋势，判断内存泄漏的地方
    - 【精准】利用浏览器F12的 Memory面板 
        - 专门针对堆内存，进行不同时间点的快照拍摄（Take snapshot），通过对比两次堆快照发现泄漏点
